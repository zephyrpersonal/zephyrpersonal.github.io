function addEventListeners(a,b,c){each(splitStr(b),function(b){a.addEventListener(b,c,!1)})}function splitStr(a){return a.trim().split(/\s+/g)}function each(a,b,c){var d;if(a)if(a.forEach)a.forEach(b,c);else if(void 0!==a.length)for(d=0;d<a.length;)b.call(c,a[d],d,a),d++;else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}var getPrefix,setCss;!function(){var b,c,a=document.createElement("meta");a.name="viewport",/Android (\d+\.\d+)/.test(navigator.userAgent)?(b=parseFloat(RegExp.$1),b>2.3?(c=parseInt(window.screen.width)/640,a.content="width=640, minimum-scale = "+c+", maximum-scale = "+c+", target-densitydpi=device-dpi"):a.content="width=640, target-densitydpi=device-dpi"):a.content="width=640, user-scalable=no, target-densitydpi=device-dpi",document.getElementsByTagName("head")[0].appendChild(a)}(),getPrefix=function(){var a=document.createElement("dummy").style,b="Webkit Moz O ms Khtml".split(" "),c={};return function(d){var e,f,g;if("undefined"==typeof c[d]){e=d.charAt(0).toUpperCase()+d.substr(1),f=(d+" "+b.join(e+" ")+e).split(" "),c[d]=null;for(g in f)if(void 0!==a[f[g]]){c[d]=f[g];break}}return c[d]}}(),setCss=function(a,b){var c,d;for(c in b)b.hasOwnProperty(c)&&(d=getPrefix(c),null!==d&&(a.style[d]=b[c]));return a},!function(a){"use strict";function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var e,d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){var d,e,i,m,n,o;for(0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1)),d=0;d<a.changedTouches.length;d++){e=a.changedTouches[d],i={};for(m in e)i[m]=e[m];n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)},l[e.identifier]=n}if(2==Object.keys(l).length){o=[];for(m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){var e,f,g,h,i,j,k,m,n,o,p,q,r,s,t;for(e=0;e<a.changedTouches.length;e++){if(f=a.changedTouches[e],g=l[f.identifier],!g)return;g.lastTouch||(g.lastTouch=g.startTouch),g.lastTime||(g.lastTime=g.startTime),g.velocityX||(g.velocityX=0),g.velocityY||(g.velocityY=0),g.duration||(g.duration=0),h=Date.now()-g.lastTime,i=(f.clientX-g.lastTouch.clientX)/h,j=(f.clientY-g.lastTouch.clientY)/h,k=70,h>k&&(h=k),g.duration+h>k&&(g.duration=k-h),g.velocityX=(g.velocityX*g.duration+i*h)/(g.duration+h),g.velocityY=(g.velocityY*g.duration+j*h)/(g.duration+h),g.duration+=h,g.lastTouch={};for(m in f)g.lastTouch[m]=f[m];g.lastTime=Date.now(),n=f.clientX-g.startTouch.clientX,o=f.clientY-g.startTouch.clientY,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),("tapping"===g.status||"pressing"===g.status)&&p>10&&(g.status="panning",g.isVertical=!(Math.abs(n)>Math.abs(o)),c(g.element,"panstart",{touch:f,touchEvent:a,isVertical:g.isVertical}),c(g.element,(g.isVertical?"vertical":"horizontal")+"panstart",{touch:f,touchEvent:a})),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:n,displacementY:o,touch:f,touchEvent:a,isVertical:g.isVertical}),g.isVertical?c(g.element,"verticalpan",{displacementY:o,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:n,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(r=[],s=[],t=[],e=0;e<a.touches.length;e++)f=a.touches[e],g=l[f.identifier],r.push([g.startTouch.clientX,g.startTouch.clientY]),s.push([f.clientX,f.clientY]);for(m in l)t.push(l[m].element);q=d(r[0][0],r[0][1],r[1][0],r[1][1],s[0][0],s[0][1],s[1][0],s[1][1]),c(b(t[0],t[1]),"dualtouch",{transform:q,touches:a.touches,touchEvent:a})}}function g(a){var d,e,i,n,o,p,q,r,s,t,u,v,w;if(2==Object.keys(l).length){d=[];for(e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(i=0;i<a.changedTouches.length;i++)n=a.changedTouches[i],o=n.identifier,p=l[o],p&&(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),m=p),"panning"===p.status&&(q=Date.now(),r=q-p.startTime,(n.clientX-p.startTouch.clientX)/r,(n.clientY-p.startTouch.clientY)/r,s=n.clientX-p.startTouch.clientX,t=n.clientY-p.startTouch.clientY,u=Math.sqrt(p.velocityY*p.velocityY+p.velocityX*p.velocityX),v=u>.5&&q-p.lastTime<100,w={duration:r,isflick:v,velocityX:p.velocityX,velocityY:p.velocityY,displacementX:s,displacementY:t,touch:n,touchEvent:a,isVertical:p.isVertical},c(p.element,"panend",w),v&&(c(p.element,"flick",w),p.isVertical?c(p.element,"verticalflick",w):c(p.element,"horizontalflick",w))),"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]);0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){var d,e,i,m,n,o;if(2==Object.keys(l).length){d=[];for(e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(i=0;i<a.changedTouches.length;i++)m=a.changedTouches[i],n=m.identifier,o=l[n],o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n]);0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.lib||(window.lib={}));